# =============================================================================
# BREPFLOW (sim4d) - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values
# DO NOT commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# SHARED INFRASTRUCTURE (MADFAM Ecosystem)
# -----------------------------------------------------------------------------
# Redis - Using shared Redis (DB 6 for BrepFlow collaboration)
REDIS_URL=redis://:redis_dev_password@madfam-redis-shared:6379/6

# -----------------------------------------------------------------------------
# JANUA AUTHENTICATION
# -----------------------------------------------------------------------------
JANUA_ENABLED=true
JANUA_API_URL=http://janua-api:8001
JANUA_JWT_SECRET=dev-shared-janua-secret-32chars!!

# -----------------------------------------------------------------------------
# APPLICATION SETTINGS
# See PORT_REGISTRY.md in solarpunk-foundry for port assignments
# -----------------------------------------------------------------------------
NODE_ENV=development
WEB_PORT=3080
COLLAB_PORT=8080

# Studio (Vite)
VITE_API_BASE_URL=http://localhost:3080
VITE_COLLAB_WS_URL=ws://localhost:8080

# Geometry Engine
ENABLE_MOCK_GEOMETRY=false
REQUIRE_REAL_OCCT=true

# -----------------------------------------------------------------------------
# COLLABORATION SERVER
# -----------------------------------------------------------------------------
COLLAB_PORT=8080
HEARTBEAT_INTERVAL=30000
LOCK_TIMEOUT=60000
ENABLE_RATE_LIMIT=true
MAX_CONNECTIONS_PER_IP=10
CORS_ORIGIN=http://localhost:5173

# -----------------------------------------------------------------------------
# TESTING
# -----------------------------------------------------------------------------
TEST_TIMEOUT=30000
PLAYWRIGHT_BASE_URL=http://localhost:5173

# -----------------------------------------------------------------------------
# MONITORING (Optional)
# -----------------------------------------------------------------------------
SENTRY_DSN=
POSTHOG_KEY=

# -----------------------------------------------------------------------------
# MADFAM ANALYTICS (Ecosystem Telemetry)
# -----------------------------------------------------------------------------
VITE_ANALYTICS_DOMAIN=sim4d.madfam.io
VITE_ANALYTICS_HOST=https://plausible.io
